<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wms.mybatis.dao.DocAsnDetailsMybatisDao" > 
<!-- Result Map-->
<resultMap id="DocAsnDetailMap" type="com.wms.entity.DocAsnDetail" >
	<result column="warehouseid" property="warehouseid"/>
	<result column="addtime" property="addtime"/>
	<result column="addwho" property="addwho"/>
	<result column="alternativedescr_c" property="alternativedescrC"/>
	<result column="alternativesku" property="alternativesku"/>
	<result column="asnlinefilter" property="asnlinefilter"/>
	<result column="asnlineno" property="asnlineno"/>
	<result column="asnno" property="asnno"/>
	<result column="containerid" property="containerid"/>
	<result column="createsource" property="createsource"/>
	<result column="customerid" property="customerid"/>
	<result column="damagedqty_each" property="damagedqtyEach"/>
	<result column="d_edi_01" property="dEdi01"/>
	<result column="d_edi_02" property="dEdi02"/>
	<result column="d_edi_03" property="dEdi03"/>
	<result column="d_edi_04" property="dEdi04"/>
	<result column="d_edi_05" property="dEdi05"/>
	<result column="d_edi_06" property="dEdi06"/>
	<result column="d_edi_07" property="dEdi07"/>
	<result column="d_edi_08" property="dEdi08"/>
	<result column="d_edi_09" property="dEdi09"/>
	<result column="d_edi_10" property="dEdi10"/>
	<result column="d_edi_11" property="dEdi11"/>
	<result column="d_edi_12" property="dEdi12"/>
	<result column="d_edi_13" property="dEdi13"/>
	<result column="d_edi_14" property="dEdi14"/>
	<result column="d_edi_15" property="dEdi15"/>
	<result column="d_edi_16" property="dEdi16"/>
	<result column="d_edi_17" property="dEdi17"/>
	<result column="d_edi_18" property="dEdi18"/>
	<result column="d_edi_19" property="dEdi19"/>
	<result column="d_edi_20" property="dEdi20"/>
	<result column="edittime" property="edittime"/>
	<result column="editwho" property="editwho"/>
	<result column="expectedqty" property="expectedqty"/>
	<result column="expectedqty_each" property="expectedqtyEach"/>
	<result column="holdrejectcode" property="holdrejectcode"/>
	<result column="holdrejectreason" property="holdrejectreason"/>
	<result column="linestatus" property="linestatus"/>
	<result column="lotatt01" property="lotatt01"/>
	<result column="lotatt02" property="lotatt02"/>
	<result column="lotatt03" property="lotatt03"/>
	<result column="lotatt04" property="lotatt04"/>
	<result column="lotatt05" property="lotatt05"/>
	<result column="lotatt06" property="lotatt06"/>
	<result column="lotatt07" property="lotatt07"/>
	<result column="lotatt08" property="lotatt08"/>
	<result column="lotatt09" property="lotatt09"/>
	<result column="lotatt10" property="lotatt10"/>
	<result column="lotatt11" property="lotatt11"/>
	<result column="lotatt12" property="lotatt12"/>
    <result column="lotatt13" property="lotatt13"/>
    <result column="lotatt14" property="lotatt14"/>
    <result column="lotatt15" property="lotatt15"/>
    <result column="lotatt16" property="lotatt16"/>
    <result column="lotatt17" property="lotatt17"/>
    <result column="lotatt18" property="lotatt18"/>
	<result column="cusdescr" property="cusdescr"/>
	<result column="notes" property="notes"/>
	<result column="operator" property="operator"/>
	<result column="overrcvpercentage" property="overrcvpercentage"/>
	<result column="packid" property="packid"/>
	<result column="palletizemethod" property="palletizemethod"/>
	<result column="palletizeqty_each" property="palletizeqtyEach"/>
	<result column="plantoloc" property="plantoloc"/>
	<result column="polineno" property="polineno"/>
	<result column="pono" property="pono"/>
	<result column="prereceivedqty_each" property="prereceivedqtyEach"/>
	<result column="printlabel" property="printlabel"/>
	<result column="productstatus" property="productstatus"/>
	<result column="productstatus_descr" property="productstatusDescr"/>
	<result column="qcstatus" property="qcstatus"/>
	<result column="receivedqty" property="receivedqty"/>
	<result column="receivedqty_each" property="receivedqtyEach"/>
	<result column="receivedtime" property="receivedtime"/>
	<result column="receivinglocation" property="receivinglocation"/>
	<result column="referencelineno" property="referencelineno"/>
	<result column="rejectedqty" property="rejectedqty"/>
	<result column="rejectedqty_each" property="rejectedqtyEach"/>
	<result column="reserve_flag" property="reserveFlag"/>
	<result column="sku" property="sku"/>
	<result column="skudescrc" property="skudescrc"/>
	<result column="skudescre" property="skudescre"/>
	<result column="totalcubic" property="totalcubic"/>
	<result column="totalgrossweight" property="totalgrossweight"/>
	<result column="totalnetweight" property="totalnetweight"/>
	<result column="totalprice" property="totalprice"/>
	<result column="uom" property="uom"/>
	<result column="userdefine1" property="userdefine1"/>
	<result column="userdefine2" property="userdefine2"/>
	<result column="userdefine3" property="userdefine3"/>
	<result column="userdefine4" property="userdefine4"/>
	<result column="userdefine5" property="userdefine5"/>
	<result column="userdefine6" property="userdefine6"/>
	<result column="codename_c" property="coldName"/>
</resultMap>
    
    <resultMap id="ExtendDetailMap" type="com.wms.entity.DocAsnDetail" extends="DocAsnDetailMap">
        <association property="basPackage" column="packid" javaType="com.wms.entity.BasPackage" select="com.wms.mybatis.dao.BasPackageMybatisDao.queryById"/>
    </resultMap>

	<!-- -->
	<resultMap id="DocPaDTOMap" type="com.wms.dto.DocPaDTO">
		<result column="asnno" property="asnno"/>
		<result column="asntype" property="asntype"/>
		<result column="linestatus" property="linestatus"/>
		<result column="asnlineno" property="asnlineno"/>
		<result column="customerid" property="customerid"/>
		<result column="userdefine3" property="userdefine3"/>
		<result column="userdefine4" property="userdefine4"/>
		<result column="sku" property="sku"/>
		<result column="lotatt01" property="lotatt01"/>
		<result column="lotatt02" property="lotatt02"/>
		<result column="lotatt03" property="lotatt03"/>
		<result column="lotatt04" property="lotatt04"/>
		<result column="lotatt05" property="lotatt05"/>
		<result column="lotatt06" property="lotatt06"/>
		<result column="lotatt07" property="lotatt07"/>
		<result column="lotatt08" property="lotatt08"/>
		<result column="lotatt09" property="lotatt09"/>
		<result column="lotatt10" property="lotatt10"/>
		<result column="lotatt11" property="lotatt11"/>
		<result column="lotatt12" property="lotatt12"/>
		<result column="lotatt13" property="lotatt13"/>
		<result column="lotatt14" property="lotatt14"/>
        <result column="lotatt15" property="lotatt15"/>
		<result column="packid" property="packid"/>
		<result column="asnstatus" property="asnstatus"/>
		<result column="receivedqty" property="receivedqty"/>
		<result column="lotnum" property="lotnum"/>
        <result column="receivinglocation" property="receivinglocation"/>
	</resultMap>
       
<!-- Doc_Asn_Details table all fields -->
<sql id="Base_Column_List" >
	 addtime,addwho,alternativedescr_c,alternativesku,asnlinefilter,asnlineno,asnno,containerid,createsource,customerid,damagedqty_each,d_edi_01,d_edi_02,d_edi_03,d_edi_04,d_edi_05,d_edi_06,d_edi_07,d_edi_08,d_edi_09,d_edi_10,d_edi_11,d_edi_12,d_edi_13,d_edi_14,d_edi_15,d_edi_16,d_edi_17,d_edi_18,d_edi_19,d_edi_20,edittime,editwho,expectedqty,expectedqty_each,holdrejectcode,holdrejectreason,linestatus,lotatt01,lotatt02,lotatt03,lotatt04,lotatt05,lotatt06,lotatt07,lotatt08,lotatt09,lotatt10,lotatt11,lotatt12,lotatt13,lotatt14,lotatt15,lotatt16,lotatt17,lotatt18,notes,operator,overrcvpercentage,packid,palletizemethod,palletizeqty_each,plantoloc,polineno,pono,prereceivedqty_each,printlabel,productstatus,productstatus_descr,qcstatus,receivedqty,receivedqty_each,receivedtime,receivinglocation,referencelineno,rejectedqty,rejectedqty_each,reserve_flag,sku,skudescrc,skudescre,totalcubic,totalgrossweight,totalnetweight,totalprice,uom,userdefine1,userdefine2,userdefine3,userdefine4,userdefine5,userdefine6
</sql>
   
<!-- 查询条件 -->
<sql id="Example_Where_Clause">
where 1=1
<trim  suffixOverrides="," >
	<if test="condition.addtime != null and condition.addtime != ''" >
	    and addtime =  #{condition.addtime}
	</if>
	<if test="condition.addwho != null and condition.addwho != ''" >
	    and addwho =  #{condition.addwho}
	</if>
	<if test="condition.alternativedescrC != null and condition.alternativedescrC != ''" >
	    and alternativedescr_c =  #{condition.alternativedescrC}
	</if>
	<if test="condition.alternativesku != null and condition.alternativesku != ''" >
	    and alternativesku =  #{condition.alternativesku}
	</if>
	<if test="condition.asnlinefilter != null and condition.asnlinefilter != ''" >
	    and asnlinefilter =  #{condition.asnlinefilter}
	</if>
	<if test="condition.asnlineno != null and condition.asnlineno != ''" >
	    and asnlineno =  #{condition.asnlineno}
	</if>
	<if test="condition.asnno != null and condition.asnno != ''" >
	    and asnno =  #{condition.asnno}
	</if>
	<if test="condition.containerid != null and condition.containerid != ''" >
	    and containerid =  #{condition.containerid}
	</if>
	<if test="condition.createsource != null and condition.createsource != ''" >
	    and createsource =  #{condition.createsource}
	</if>
	<if test="condition.customerid != null and condition.customerid != ''" >
	    and customerid =  #{condition.customerid}
	</if>
	<if test="condition.damagedqtyEach != null and condition.damagedqtyEach != ''" >
	    and damagedqty_each =  #{condition.damagedqtyEach}
	</if>
	<if test="condition.dEdi01 != null and condition.dEdi01 != ''" >
	    and d_edi_01 =  #{condition.dEdi01}
	</if>
	<if test="condition.dEdi02 != null and condition.dEdi02 != ''" >
	    and d_edi_02 =  #{condition.dEdi02}
	</if>
	<if test="condition.dEdi03 != null and condition.dEdi03 != ''" >
	    and d_edi_03 =  #{condition.dEdi03}
	</if>
	<if test="condition.dEdi04 != null and condition.dEdi04 != ''" >
	    and d_edi_04 =  #{condition.dEdi04}
	</if>
	<if test="condition.dEdi05 != null and condition.dEdi05 != ''" >
	    and d_edi_05 =  #{condition.dEdi05}
	</if>
	<if test="condition.dEdi06 != null and condition.dEdi06 != ''" >
	    and d_edi_06 =  #{condition.dEdi06}
	</if>
	<if test="condition.dEdi07 != null and condition.dEdi07 != ''" >
	    and d_edi_07 =  #{condition.dEdi07}
	</if>
	<if test="condition.dEdi08 != null and condition.dEdi08 != ''" >
	    and d_edi_08 =  #{condition.dEdi08}
	</if>
	<if test="condition.dEdi09 != null and condition.dEdi09 != ''" >
	    and d_edi_09 =  #{condition.dEdi09}
	</if>
	<if test="condition.dEdi10 != null and condition.dEdi10 != ''" >
	    and d_edi_10 =  #{condition.dEdi10}
	</if>
	<if test="condition.dEdi11 != null and condition.dEdi11 != ''" >
	    and d_edi_11 =  #{condition.dEdi11}
	</if>
	<if test="condition.dEdi12 != null and condition.dEdi12 != ''" >
	    and d_edi_12 =  #{condition.dEdi12}
	</if>
	<if test="condition.dEdi13 != null and condition.dEdi13 != ''" >
	    and d_edi_13 =  #{condition.dEdi13}
	</if>
	<if test="condition.dEdi14 != null and condition.dEdi14 != ''" >
	    and d_edi_14 =  #{condition.dEdi14}
	</if>
	<if test="condition.dEdi15 != null and condition.dEdi15 != ''" >
	    and d_edi_15 =  #{condition.dEdi15}
	</if>
	<if test="condition.dEdi16 != null and condition.dEdi16 != ''" >
	    and d_edi_16 =  #{condition.dEdi16}
	</if>
	<if test="condition.dEdi17 != null and condition.dEdi17 != ''" >
	    and d_edi_17 =  #{condition.dEdi17}
	</if>
	<if test="condition.dEdi18 != null and condition.dEdi18 != ''" >
	    and d_edi_18 =  #{condition.dEdi18}
	</if>
	<if test="condition.dEdi19 != null and condition.dEdi19 != ''" >
	    and d_edi_19 =  #{condition.dEdi19}
	</if>
	<if test="condition.dEdi20 != null and condition.dEdi20 != ''" >
	    and d_edi_20 =  #{condition.dEdi20}
	</if>
	<if test="condition.edittime != null and condition.edittime != ''" >
	    and edittime =  #{condition.edittime}
	</if>
	<if test="condition.editwho != null and condition.editwho != ''" >
	    and editwho =  #{condition.editwho}
	</if>
	<if test="condition.expectedqty != null and condition.expectedqty != ''" >
	    and expectedqty =  #{condition.expectedqty}
	</if>
	<if test="condition.expectedqtyEach != null and condition.expectedqtyEach != ''" >
	    and expectedqty_each =  #{condition.expectedqtyEach}
	</if>
	<if test="condition.holdrejectcode != null and condition.holdrejectcode != ''" >
	    and holdrejectcode =  #{condition.holdrejectcode}
	</if>
	<if test="condition.holdrejectreason != null and condition.holdrejectreason != ''" >
	    and holdrejectreason =  #{condition.holdrejectreason}
	</if>
	<if test="condition.linestatus != null and condition.linestatus != ''" >
	    and linestatus =  #{condition.linestatus}
	</if>
	<if test="condition.lotatt01 != null and condition.lotatt01 != ''" >
	    and lotatt01 =  #{condition.lotatt01}
	</if>
	<if test="condition.lotatt02 != null and condition.lotatt02 != ''" >
	    and lotatt02 =  #{condition.lotatt02}
	</if>
	<if test="condition.lotatt03 != null and condition.lotatt03 != ''" >
	    and lotatt03 =  #{condition.lotatt03}
	</if>
	<if test="condition.lotatt04 != null and condition.lotatt04 != ''" >
	    and lotatt04 =  #{condition.lotatt04}
	</if>
	<if test="condition.lotatt05 != null and condition.lotatt05 != ''" >
	    and lotatt05 =  #{condition.lotatt05}
	</if>
	<if test="condition.lotatt06 != null and condition.lotatt06 != ''" >
	    and lotatt06 =  #{condition.lotatt06}
	</if>
	<if test="condition.lotatt07 != null and condition.lotatt07 != ''" >
	    and lotatt07 =  #{condition.lotatt07}
	</if>
	<if test="condition.lotatt08 != null and condition.lotatt08 != ''" >
	    and lotatt08 =  #{condition.lotatt08}
	</if>
	<if test="condition.lotatt09 != null and condition.lotatt09 != ''" >
	    and lotatt09 =  #{condition.lotatt09}
	</if>
	<if test="condition.lotatt10 != null and condition.lotatt10 != ''" >
	    and lotatt10 =  #{condition.lotatt10}
	</if>
	<if test="condition.lotatt11 != null and condition.lotatt11 != ''" >
	    and lotatt11 =  #{condition.lotatt11}
	</if>
	<if test="condition.lotatt12 != null and condition.lotatt12 != ''" >
	    and lotatt12 =  #{condition.lotatt12}
	</if>
    <if test="condition.lotatt13 != null and condition.lotatt13 != ''" >
        and lotatt13 =  #{condition.lotatt13}
    </if>
    <if test="condition.lotatt14 != null and condition.lotatt14 != ''" >
        and lotatt14 =  #{condition.lotatt14}
    </if>
    <if test="condition.lotatt15 != null and condition.lotatt15 != ''" >
        and lotatt15 =  #{condition.lotatt15}
    </if>
    <if test="condition.lotatt16 != null and condition.lotatt16 != ''" >
        and lotatt16 =  #{condition.lotatt16}
    </if>
    <if test="condition.lotatt17 != null and condition.lotatt17 != ''" >
        and lotatt17 =  #{condition.lotatt17}
    </if>
    <if test="condition.lotatt18 != null and condition.lotatt18 != ''" >
        and lotatt18 =  #{condition.lotatt18}
    </if>
	<if test="condition.notes != null and condition.notes != ''" >
	    and notes =  #{condition.notes}
	</if>
	<if test="condition.operator != null and condition.operator != ''" >
	    and operator =  #{condition.operator}
	</if>
	<if test="condition.overrcvpercentage != null and condition.overrcvpercentage != ''" >
	    and overrcvpercentage =  #{condition.overrcvpercentage}
	</if>
	<if test="condition.packid != null and condition.packid != ''" >
	    and packid =  #{condition.packid}
	</if>
	<if test="condition.palletizemethod != null and condition.palletizemethod != ''" >
	    and palletizemethod =  #{condition.palletizemethod}
	</if>
	<if test="condition.palletizeqtyEach != null and condition.palletizeqtyEach != ''" >
	    and palletizeqty_each =  #{condition.palletizeqtyEach}
	</if>
	<if test="condition.plantoloc != null and condition.plantoloc != ''" >
	    and plantoloc =  #{condition.plantoloc}
	</if>
	<if test="condition.polineno != null and condition.polineno != ''" >
	    and polineno =  #{condition.polineno}
	</if>
	<if test="condition.pono != null and condition.pono != ''" >
	    and pono =  #{condition.pono}
	</if>
	<if test="condition.prereceivedqtyEach != null and condition.prereceivedqtyEach != ''" >
	    and prereceivedqty_each =  #{condition.prereceivedqtyEach}
	</if>
	<if test="condition.printlabel != null and condition.printlabel != ''" >
	    and printlabel =  #{condition.printlabel}
	</if>
	<if test="condition.productstatus != null and condition.productstatus != ''" >
	    and productstatus =  #{condition.productstatus}
	</if>
	<if test="condition.productstatusDescr != null and condition.productstatusDescr != ''" >
	    and productstatus_descr =  #{condition.productstatusDescr}
	</if>
	<if test="condition.qcstatus != null and condition.qcstatus != ''" >
	    and qcstatus =  #{condition.qcstatus}
	</if>
	<if test="condition.receivedqty != null and condition.receivedqty != ''" >
	    and receivedqty =  #{condition.receivedqty}
	</if>
	<if test="condition.receivedqtyEach != null and condition.receivedqtyEach != ''" >
	    and receivedqty_each =  #{condition.receivedqtyEach}
	</if>
	<if test="condition.receivedtime != null and condition.receivedtime != ''" >
	    and receivedtime =  #{condition.receivedtime}
	</if>
	<if test="condition.receivinglocation != null and condition.receivinglocation != ''" >
	    and receivinglocation =  #{condition.receivinglocation}
	</if>
	<if test="condition.referencelineno != null and condition.referencelineno != ''" >
	    and referencelineno =  #{condition.referencelineno}
	</if>
	<if test="condition.rejectedqty != null and condition.rejectedqty != ''" >
	    and rejectedqty =  #{condition.rejectedqty}
	</if>
	<if test="condition.rejectedqtyEach != null and condition.rejectedqtyEach != ''" >
	    and rejectedqty_each =  #{condition.rejectedqtyEach}
	</if>
	<if test="condition.reserveFlag != null and condition.reserveFlag != ''" >
	    and reserve_flag =  #{condition.reserveFlag}
	</if>
	<if test="condition.sku != null and condition.sku != ''" >
	    and sku =  #{condition.sku}
	</if>
	<if test="condition.skudescrc != null and condition.skudescrc != ''" >
	    and skudescrc =  #{condition.skudescrc}
	</if>
	<if test="condition.skudescre != null and condition.skudescre != ''" >
	    and skudescre =  #{condition.skudescre}
	</if>
	<if test="condition.totalcubic != null and condition.totalcubic != ''" >
	    and totalcubic =  #{condition.totalcubic}
	</if>
	<if test="condition.totalgrossweight != null and condition.totalgrossweight != ''" >
	    and totalgrossweight =  #{condition.totalgrossweight}
	</if>
	<if test="condition.totalnetweight != null and condition.totalnetweight != ''" >
	    and totalnetweight =  #{condition.totalnetweight}
	</if>
	<if test="condition.totalprice != null and condition.totalprice != ''" >
	    and totalprice =  #{condition.totalprice}
	</if>
	<if test="condition.uom != null and condition.uom != ''" >
	    and uom =  #{condition.uom}
	</if>
	<if test="condition.userdefine1 != null and condition.userdefine1 != ''" >
	    and userdefine1 =  #{condition.userdefine1}
	</if>
	<if test="condition.userdefine2 != null and condition.userdefine2 != ''" >
	    and userdefine2 =  #{condition.userdefine2}
	</if>
	<if test="condition.userdefine3 != null and condition.userdefine3 != ''" >
	    and userdefine3 =  #{condition.userdefine3}
	</if>
	<if test="condition.userdefine4 != null and condition.userdefine4 != ''" >
	    and userdefine4 =  #{condition.userdefine4}
	</if>
	<if test="condition.userdefine5 != null and condition.userdefine5 != ''" >
	    and userdefine5 =  #{condition.userdefine5}
	</if>
	<if test="condition.userdefine6 != null and condition.userdefine6 != ''" >
	    and userdefine6 =  #{condition.userdefine6}
	</if>
</trim>
</sql>
   

<!-- 插入记录 TODO:新增了很多批次号，用到add的时候考虑下要不要加上去 add by Gizmo 2019-07-06 -->
<insert id="add" parameterType="Object" >
insert into doc_asn_details
        (asnno,
         asnlineno,
         customerid,
         sku,
         skudescrc,
         linestatus,
         expectedqty,
         expectedqty_each,
         rejectedqty,
         rejectedqty_each,
         receivedqty,
         receivedqty_each,
         uom,
         packid,
         holdrejectcode,
         holdrejectreason,
         productstatus,
         productstatus_descr,
         totalcubic,
         totalgrossweight,
         totalnetweight,
         totalprice,
         receivinglocation,
         addtime,
         addwho,
         edittime,
         editwho,
         createsource,
         palletizeqty_each,
         lotatt01,lotatt02,lotatt03,lotatt04,lotatt05,lotatt06,lotatt07,lotatt08,lotatt09,lotatt10,lotatt11,lotatt12,lotatt13,lotatt14,lotatt15,lotatt16,lotatt17,lotatt18,
         reserve_flag)
        values(#{asnno},
               #{asnlineno},
               #{customerid},
               #{sku,jdbcType=VARCHAR},
               #{skudescrc,jdbcType=VARCHAR},
               '00',
               #{expectedqty},
               #{expectedqtyEach},
               0,
               0,
               0,
               0,
               'EA',
               'STANDARD',
               'OK',
               '正常',
               '00',
               '正常',
               0,
               0,
               0,
               0,
               #{receivinglocation},
               now(),
               #{addwho},
               now(),
               #{addwho},
               #{addwho},
               0,
               #{lotatt01, jdbcType=VARCHAR},#{lotatt02, jdbcType=VARCHAR},#{lotatt03, jdbcType=VARCHAR},
               #{lotatt04, jdbcType=VARCHAR},#{lotatt05, jdbcType=VARCHAR},#{lotatt06, jdbcType=VARCHAR},
               #{lotatt07, jdbcType=VARCHAR},#{lotatt08, jdbcType=VARCHAR},#{lotatt09, jdbcType=VARCHAR},
               #{lotatt10, jdbcType=VARCHAR},#{lotatt11, jdbcType=VARCHAR},#{lotatt12, jdbcType=VARCHAR},
               #{lotatt13, jdbcType=VARCHAR},#{lotatt14, jdbcType=VARCHAR},#{lotatt15, jdbcType=VARCHAR},
               #{lotatt16, jdbcType=VARCHAR},#{lotatt17, jdbcType=VARCHAR},#{lotatt18, jdbcType=VARCHAR},
               'N'
               )
</insert>

<!-- 根据id，修改记录-->  
<update id="update" parameterType="Object" >
	update Doc_Asn_Details
	set sku=#{sku},
	<if test="alternativesku != null  ">
		alternativesku=#{alternativesku},
	</if>
	expectedqty=#{expectedqty},
	expectedqty_each=#{expectedqty},
<!-- 	receivedqty=#{receivedqty}, 收货数量要用收货流程不能直接更新数字-->
<!-- 	receivedqty_each=#{receivedqty}, -->
	packid=#{packid},
	<if test="totalgrossweight != null  ">
		totalgrossweight=#{totalgrossweight},
	</if>
	<if test="totalcubic != null  ">
		totalcubic=#{totalcubic},
	</if>
	<if test="totalprice != null  ">
		totalprice=#{totalprice},
	</if>
	<if test="receivinglocation != null  ">
		receivinglocation=#{receivinglocation},
	</if>
	<if test="notes != null  ">
		notes=#{notes},
	</if>
	<if test="lotatt01 != null  ">
		lotatt01=#{lotatt01, jdbcType=VARCHAR},
	</if>
	<if test="lotatt02 != null  ">
		lotatt02=#{lotatt02, jdbcType=VARCHAR},
	</if>
	<if test="lotatt03 != null  ">
		lotatt03=#{lotatt03, jdbcType=VARCHAR},
	</if>
	<if test="lotatt04 != null  ">
		lotatt04=#{lotatt04, jdbcType=VARCHAR},
	</if>
	<if test="lotatt05 != null  ">
		lotatt05=#{lotatt05, jdbcType=VARCHAR},
	</if>
	<if test="lotatt06 != null  ">
		lotatt06=#{lotatt06, jdbcType=VARCHAR},
	</if>
    <if test="lotatt07 != null  ">
        lotatt07=#{lotatt07, jdbcType=VARCHAR},
    </if>
    <if test="lotatt08 != null  ">
        lotatt08=#{lotatt08, jdbcType=VARCHAR},
    </if>
    <if test="lotatt09 != null  ">
        lotatt09=#{lotatt09, jdbcType=VARCHAR},
    </if>
    <if test="lotatt10 != null  ">
        lotatt10=#{lotatt10, jdbcType=VARCHAR},
    </if>
    <if test="lotatt11 != null  ">
        lotatt11=#{lotatt11, jdbcType=VARCHAR},
    </if>
    <if test="lotatt12 != null  ">
        lotatt12=#{lotatt12, jdbcType=VARCHAR},
    </if>
    <if test="lotatt13 != null  ">
        lotatt13=#{lotatt13, jdbcType=VARCHAR},
    </if>
    <if test="lotatt14 != null  ">
        lotatt14=#{lotatt14, jdbcType=VARCHAR},
    </if>
    <if test="lotatt15 != null  ">
        lotatt15=#{lotatt15, jdbcType=VARCHAR},
    </if>
    <if test="lotatt16 != null  ">
        lotatt16=#{lotatt16, jdbcType=VARCHAR},
    </if>
    <if test="lotatt17 != null  ">
        lotatt17=#{lotatt17, jdbcType=VARCHAR},
    </if>
    <if test="lotatt18 != null  ">
        lotatt18=#{lotatt18, jdbcType=VARCHAR},
    </if>
	edittime=now(),
	editwho=#{editwho}
	where asnno=#{asnno, jdbcType=VARCHAR}
	and asnlineno=#{asnlineno, jdbcType=NUMERIC}
</update>
 
<!-- 修改记录，只修改只不为空的字段 -->
<update id="updateBySelective" parameterType="Object" >
	update Doc_Asn_Details set 
	<trim  suffixOverrides="," >
	<if test="addwho != null  ">
		addwho=#{addwho},
	</if>
	<if test="alternativedescrC != null  ">
		alternativedescr_c=#{alternativedescrC},
	</if>
	<if test="alternativesku != null  ">
		alternativesku=#{alternativesku},
	</if>
	<if test="asnlinefilter != null  ">
		asnlinefilter=#{asnlinefilter},
	</if>
	<if test="asnlineno != null  ">
		asnlineno=#{asnlineno},
	</if>
	<if test="asnno != null  ">
		asnno=#{asnno},
	</if>
	<if test="containerid != null  ">
		containerid=#{containerid},
	</if>
	<if test="createsource != null  ">
		createsource=#{createsource},
	</if>
	<if test="customerid != null  ">
		customerid=#{customerid},
	</if>
	<if test="damagedqtyEach != null  ">
		damagedqty_each=#{damagedqtyEach},
	</if>
	<if test="dEdi01 != null  ">
		d_edi_01=#{dEdi01},
	</if>
	<if test="dEdi02 != null  ">
		d_edi_02=#{dEdi02},
	</if>
	<if test="dEdi03 != null  ">
		d_edi_03=#{dEdi03},
	</if>
	<if test="dEdi04 != null  ">
		d_edi_04=#{dEdi04},
	</if>
	<if test="dEdi05 != null  ">
		d_edi_05=#{dEdi05},
	</if>
	<if test="dEdi06 != null  ">
		d_edi_06=#{dEdi06},
	</if>
	<if test="dEdi07 != null  ">
		d_edi_07=#{dEdi07},
	</if>
	<if test="dEdi08 != null  ">
		d_edi_08=#{dEdi08},
	</if>
	<if test="dEdi09 != null  ">
		d_edi_09=#{dEdi09},
	</if>
	<if test="dEdi10 != null  ">
		d_edi_10=#{dEdi10},
	</if>
	<if test="dEdi11 != null  ">
		d_edi_11=#{dEdi11},
	</if>
	<if test="dEdi12 != null  ">
		d_edi_12=#{dEdi12},
	</if>
	<if test="dEdi13 != null  ">
		d_edi_13=#{dEdi13},
	</if>
	<if test="dEdi14 != null  ">
		d_edi_14=#{dEdi14},
	</if>
	<if test="dEdi15 != null  ">
		d_edi_15=#{dEdi15},
	</if>
	<if test="dEdi16 != null  ">
		d_edi_16=#{dEdi16},
	</if>
	<if test="dEdi17 != null  ">
		d_edi_17=#{dEdi17},
	</if>
	<if test="dEdi18 != null  ">
		d_edi_18=#{dEdi18},
	</if>
	<if test="dEdi19 != null  ">
		d_edi_19=#{dEdi19},
	</if>
	<if test="dEdi20 != null  ">
		d_edi_20=#{dEdi20},
	</if>
	<if test="edittime != null  ">
		edittime=#{edittime},
	</if>
	<if test="editwho != null  ">
		editwho=#{editwho},
	</if>
	<if test="expectedqty != null  ">
		expectedqty=#{expectedqty},
	</if>
	<if test="expectedqtyEach != null  ">
		expectedqty_each=#{expectedqtyEach},
	</if>
	<if test="holdrejectcode != null  ">
		holdrejectcode=#{holdrejectcode},
	</if>
	<if test="holdrejectreason != null  ">
		holdrejectreason=#{holdrejectreason},
	</if>
	<if test="linestatus != null  ">
		linestatus=#{linestatus},
	</if>
	<if test="lotatt01 != null  ">
		lotatt01=#{lotatt01},
	</if>
	<if test="lotatt02 != null  ">
		lotatt02=#{lotatt02},
	</if>
	<if test="lotatt03 != null  ">
		lotatt03=#{lotatt03},
	</if>
	<if test="lotatt04 != null  ">
		lotatt04=#{lotatt04},
	</if>
	<if test="lotatt05 != null  ">
		lotatt05=#{lotatt05},
	</if>
	<if test="lotatt06 != null  ">
		lotatt06=#{lotatt06},
	</if>
	<if test="lotatt07 != null  ">
		lotatt07=#{lotatt07},
	</if>
	<if test="lotatt08 != null  ">
		lotatt08=#{lotatt08},
	</if>
	<if test="lotatt09 != null  ">
		lotatt09=#{lotatt09},
	</if>
	<if test="lotatt10 != null  ">
		lotatt10=#{lotatt10},
	</if>
	<if test="lotatt11 != null  ">
		lotatt11=#{lotatt11},
	</if>
	<if test="lotatt12 != null  ">
		lotatt12=#{lotatt12},
	</if>
        <if test="lotatt13 != null  ">
            lotatt13=#{lotatt13, jdbcType=VARCHAR},
        </if>
        <if test="lotatt14 != null  ">
            lotatt14=#{lotatt14, jdbcType=VARCHAR},
        </if>
        <if test="lotatt15 != null  ">
            lotatt15=#{lotatt15, jdbcType=VARCHAR},
        </if>
        <if test="lotatt16 != null  ">
            lotatt16=#{lotatt16, jdbcType=VARCHAR},
        </if>
        <if test="lotatt17 != null  ">
            lotatt17=#{lotatt17, jdbcType=VARCHAR},
        </if>
        <if test="lotatt18 != null  ">
            lotatt18=#{lotatt18, jdbcType=VARCHAR},
        </if>
	<if test="notes != null  ">
		notes=#{notes},
	</if>
	<if test="operator != null  ">
		operator=#{operator},
	</if>
	<if test="overrcvpercentage != null  ">
		overrcvpercentage=#{overrcvpercentage},
	</if>
	<if test="packid != null  ">
		packid=#{packid},
	</if>
	<if test="palletizemethod != null  ">
		palletizemethod=#{palletizemethod},
	</if>
	<if test="palletizeqtyEach != null  ">
		palletizeqty_each=#{palletizeqtyEach},
	</if>
	<if test="plantoloc != null  ">
		plantoloc=#{plantoloc},
	</if>
	<if test="polineno != null  ">
		polineno=#{polineno},
	</if>
	<if test="pono != null  ">
		pono=#{pono},
	</if>
	<if test="prereceivedqtyEach != null  ">
		prereceivedqty_each=#{prereceivedqtyEach},
	</if>
	<if test="printlabel != null  ">
		printlabel=#{printlabel},
	</if>
	<if test="productstatus != null  ">
		productstatus=#{productstatus},
	</if>
	<if test="productstatusDescr != null  ">
		productstatus_descr=#{productstatusDescr},
	</if>
	<if test="qcstatus != null  ">
		qcstatus=#{qcstatus},
	</if>
	<if test="receivedqty != null  ">
		receivedqty=#{receivedqty},
	</if>
	<if test="receivedqtyEach != null  ">
		receivedqty_each=#{receivedqtyEach},
	</if>
	<if test="receivedtime != null  ">
		receivedtime=#{receivedtime},
	</if>
	<if test="receivinglocation != null  ">
		receivinglocation=#{receivinglocation},
	</if>
	<if test="referencelineno != null  ">
		referencelineno=#{referencelineno},
	</if>
	<if test="rejectedqty != null  ">
		rejectedqty=#{rejectedqty},
	</if>
	<if test="rejectedqtyEach != null  ">
		rejectedqty_each=#{rejectedqtyEach},
	</if>
	<if test="reserveFlag != null  ">
		reserve_flag=#{reserveFlag},
	</if>
	<if test="sku != null  ">
		sku=#{sku},
	</if>
	<if test="skudescrc != null  ">
		skudescrc=#{skudescrc},
	</if>
	<if test="skudescre != null  ">
		skudescre=#{skudescre},
	</if>
	<if test="totalcubic != null  ">
		totalcubic=#{totalcubic},
	</if>
	<if test="totalgrossweight != null  ">
		totalgrossweight=#{totalgrossweight},
	</if>
	<if test="totalnetweight != null  ">
		totalnetweight=#{totalnetweight},
	</if>
	<if test="totalprice != null  ">
		totalprice=#{totalprice},
	</if>
	<if test="uom != null  ">
		uom=#{uom},
	</if>
	<if test="userdefine1 != null  ">
		userdefine1=#{userdefine1},
	</if>
	<if test="userdefine2 != null  ">
		userdefine2=#{userdefine2},
	</if>
	<if test="userdefine3 != null  ">
		userdefine3=#{userdefine3},
	</if>
	<if test="userdefine4 != null  ">
		userdefine4=#{userdefine4},
	</if>
	<if test="userdefine5 != null  ">
		userdefine5=#{userdefine5},
	</if>
	<if test="userdefine6 != null  ">
		userdefine6=#{userdefine6},
	</if>
	</trim> where addtime=#{addtime}
</update>

<!-- 删除记录 -->
<delete id="delete" parameterType="Object">
	delete from Doc_Asn_Details where asnno = #{asnno} and asnlineno = #{asnlineno}
</delete>
 
<!-- 根据id查询 入库单管理明细 -->
<select id="queryById"  resultMap="DocAsnDetailMap" parameterType="Object">
	select <include refid="Base_Column_List" /> 
	 from Doc_Asn_Details where asnno = #{asnno, jdbcType=VARCHAR} and asnlineno = #{asnlineno, jdbcType=NUMERIC}
</select>
<!-- 根据id查询 入库单管理明细 -->
<select id="queryByAsnNo"  resultMap="DocAsnDetailMap" parameterType="Object">
	select <include refid="Base_Column_List" />
	 from Doc_Asn_Details where asnno = #{asnno, jdbcType=VARCHAR}
</select>

<!-- 入库单明细 列表总数-->
<select id="queryByCount" resultType="java.lang.Integer"  parameterType="Object">
	select count(1) from Doc_Asn_Details where asnno = #{condition.asnno,jdbcType=VARCHAR}
</select>

	<!-- 订单明细 列表总数-->
<select id="queryBySum" resultMap="DocAsnDetailMap"  parameterType="Object">
	select sum(expectedqty) expectedqty,sum(receivedqty) receivedqty
	from Doc_Asn_Details
	where asnno = #{asnno}
</select>
<!-- 查询入库单明细列表 -->
<select id="queryByPageList" resultMap="ExtendDetailMap"  parameterType="Object">
	select *
	  from (select a.customerid,
	               a.asnno,
	               a.asnlineno,
	               a.linestatus,
	               c.codename_c as linestatusName,
	               a.sku,
	               b.reservedfield01 as skudescrc,
	               a.alternativesku,
	               a.packid,
	               a.expectedqty,
	               a.receivedqty,
	               a.totalcubic,
	               a.totalgrossweight,
	               a.totalprice,
	               a.receivinglocation,
	               a.lotatt01,
	               a.lotatt02,
	               a.lotatt03,
	               a.lotatt04,
	               a.lotatt05,
	               a.lotatt06,
                   a.lotatt07,
                   a.lotatt08,
                   a.lotatt09,
                   a.lotatt10,
                   a.lotatt11,
                   a.lotatt12,
    a.lotatt13,
    a.lotatt14,
    a.lotatt15,
    a.lotatt16,
    a.lotatt17,
    a.lotatt18,
	bc.descr_c as cusdescr,
	cold.codename_c,
				   	(@rowNum:=@rowNum+1) as row_num
	          from Doc_Asn_Details a
                   	LEFT OUTER JOIN Bas_Sku b on a.customerid = b.customerid
					AND a.sku = b.sku
					LEFT OUTER JOIN bas_customer bc ON a.lotatt08 = bc.customerid
					LEFT JOIN bas_codes CODE ON code.code = a.linestatus
					LEFT JOIN bas_codes cold on cold.code = b.reservedfield07 and cold.codeid='LL_TYP',
					Bas_Codes c,(Select (@rowNum :=0)) d
	         where a.linestatus = c.code
				AND code.codeid = 'ASN_STS'
	           and c.codeid = 'ASN_STS'
	           and a.asnno = #{condition.asnno,jdbcType=VARCHAR}) as t
	 where 1 = 1
    <if test="limitClause != null and limitClause != ''" >
       ${limitClause}
    </if>
</select>

<!--入库单明细行号-->
<select id="getAsnlinenoById" resultType="int"  parameterType="Object">
	select ifnull(max(asnLineno),0) from Doc_Asn_Details where asnno = #{asnno,jdbcType=VARCHAR}
</select>

<!--按明细行收货 -->
<select id="receiveByAsn" statementType="CALLABLE" parameterType="java.util.Map">
	<!--EXEC SPASN_Receiving_Process 'WH01',                                 '3','A16011800001',                   '1',                                  '*','*','00','正常','OK','正常','','XTCS'                                 ,'TEST001',                      '90'只支持完全收货                                                                         ,'0','EA','STANDARD','',''                                 ,'',                                 '2016-01-18',                         '',                                  ''                                   ,''                                  ,'','','','','','','0'                                   ,'0.000'                                     ,'0.000','0.00000',                             '','','','','','TEST001',                                    'TEST001'                                    ,'00','','2016-01-18 14:01',                      'Y','wpsadmin'                         ,'CN','wpsadmin'                         ,''-->
	   {call SPASN_Receiving_Process(#{warehouseid,mode=IN,jdbcType=VARCHAR},'1',#{asnno,mode=IN,jdbcType=VARCHAR},#{asnlineno,mode=IN,jdbcType=VARCHAR},'*','*','00','正常','OK','正常','',#{customerid,mode=IN,jdbcType=VARCHAR},#{sku,mode=IN,jdbcType=VARCHAR},#{expectedqty,mode=IN,jdbcType=VARCHAR},#{expectedqty,mode=IN,jdbcType=VARCHAR},'EA',#{packid,mode=IN,jdbcType=VARCHAR},'',#{lotatt01,mode=IN,jdbcType=VARCHAR},#{lotatt02,mode=IN,jdbcType=VARCHAR},#{lotatt03,mode=IN,jdbcType=VARCHAR},#{lotatt04,mode=IN,jdbcType=VARCHAR},#{lotatt05,mode=IN,jdbcType=VARCHAR},#{lotatt06,mode=IN,jdbcType=VARCHAR},#{lotatt07,mode=IN,jdbcType=VARCHAR},#{lotatt08,mode=IN,jdbcType=VARCHAR},#{lotatt09,mode=IN,jdbcType=VARCHAR},#{lotatt10,mode=IN,jdbcType=VARCHAR},#{lotatt11,mode=IN,jdbcType=VARCHAR},#{lotatt12,mode=IN,jdbcType=VARCHAR},#{lotatt13,mode=IN,jdbcType=VARCHAR},#{lotatt14,mode=IN,jdbcType=VARCHAR},#{lotatt15,mode=IN,jdbcType=VARCHAR},null,null,null,#{totalcubic,mode=IN,jdbcType=VARCHAR},#{totalgrossweight,mode=IN,jdbcType=VARCHAR},'0.000',#{totalprice,mode=IN,jdbcType=VARCHAR},'','','','','',#{receivinglocation,mode=IN,jdbcType=VARCHAR},#{receivinglocation,mode=IN,jdbcType=VARCHAR},'00','',#{receivedtime,mode=IN,jdbcType=VARCHAR},'Y',#{editwho,mode=IN,jdbcType=VARCHAR},'CN',#{editwho,mode=IN,jdbcType=VARCHAR},#{result,mode=OUT,jdbcType=VARCHAR})}
</select>

    <select id="testProcedure" statementType="CALLABLE" parameterType="java.util.Map">
        {call SP_test(#{userid,mode=IN,jdbcType=VARCHAR},#{returnCode,mode=OUT,jdbcType=VARCHAR})}
    </select>

<!--	如果要启动需要重新翻一遍-->
    <select id="receiveGoods" statementType="CALLABLE" parameterType="java.util.Map">
        {call spasn_receiving_process(#{warehouseid,mode=IN,jdbcType=VARCHAR},'2',#{asnno,mode=IN,jdbcType=VARCHAR},#{asnlineno,mode=IN,jdbcType=VARCHAR},'*','*','00','正常','OK','正常','',#{customerid,mode=IN,jdbcType=VARCHAR},#{sku,mode=IN,jdbcType=VARCHAR},#{receivedqty,mode=IN,jdbcType=VARCHAR},'0','EA','STANDARD','',#{lotatt01,mode=IN,jdbcType=VARCHAR},#{lotatt02,mode=IN,jdbcType=VARCHAR},#{lotatt03,mode=IN,jdbcType=VARCHAR},#{lotatt04,mode=IN,jdbcType=VARCHAR},#{lotatt05,mode=IN,jdbcType=VARCHAR},#{lotatt06,mode=IN,jdbcType=VARCHAR},#{lotatt07,mode=IN,jdbcType=VARCHAR},#{lotatt08,mode=IN,jdbcType=VARCHAR},#{lotatt09,mode=IN,jdbcType=VARCHAR},#{lotatt10,mode=IN,jdbcType=VARCHAR},#{lotatt11,mode=IN,jdbcType=VARCHAR},#{lotatt12,mode=IN,jdbcType=VARCHAR},#{lotatt13,mode=IN,jdbcType=VARCHAR},#{lotatt14,mode=IN,jdbcType=VARCHAR},#{lotatt15,mode=IN,jdbcType=VARCHAR},'','','',#{totalcubic,mode=IN,jdbcType=VARCHAR},#{totalgrossweight,mode=IN,jdbcType=VARCHAR},'0.000',#{totalprice,mode=IN,jdbcType=VARCHAR},'','','','','',#{receivinglocation,mode=IN,jdbcType=VARCHAR},#{receivinglocation,mode=IN,jdbcType=VARCHAR},'00','',#{receivingtime,mode=IN,jdbcType=VARCHAR},'Y',#{editwho,mode=IN,jdbcType=VARCHAR},'CN',#{editwho,mode=IN,jdbcType=VARCHAR}, #{result,mode=OUT,jdbcType=VARCHAR})}
    </select>

<!--新增订单号 -->
<select id="getIdSequence" statementType="CALLABLE" parameterType="java.util.Map">
   {call SPCOM_GetIDSequence(#{warehouseid,mode=IN,jdbcType=VARCHAR},'CN','PANO',#{resultNo,mode=OUT,jdbcType=VARCHAR},#{resultCode,mode=OUT,jdbcType=VARCHAR})}
</select>

<!-- 根据id查询 入库单管理明细 -->
<select id="queryDocPaDTO"  resultMap="DocPaDTOMap">
	select h.asnstatus,h.asnno,h.asnreference1,h.asnreference2,
    de.linestatus,de.asnlineno,de.customerid,de.sku,'DJ' as lotatt10,de.packid, ia.lotnum,de.customerid,
    de.expectedqty,de.receivinglocation,de.userdefine3,de.userdefine4,de.lotatt01,de.lotatt02,de.lotatt03,
    de.lotatt04,de.lotatt05,de.lotatt06,de.lotatt07,de.lotatt08,de.lotatt09,de.lotatt11,de.lotatt12,
    de.lotatt13,de.lotatt14,de.lotatt15,h.asntype,de.receivedqty
	from doc_asn_header h
    left join doc_asn_details de on h.asnno = de.asnno
    left join inv_lot_att ia on
          IFNULL(ia.lotatt01,'') = IFNULL(rtrim(de.lotatt01),'')
      and IFNULL(ia.lotatt02,'') = IFNULL(rtrim(de.lotatt02),'')
      and IFNULL(ia.lotatt03,'') = IFNULL(rtrim(de.lotatt03),'')
      and IFNULL(ia.lotatt04,'') = IFNULL(rtrim(de.lotatt04),'')
      and IFNULL(ia.lotatt05,'') = IFNULL(rtrim(de.lotatt05),'')
      and IFNULL(ia.lotatt06,'') = IFNULL(rtrim(de.lotatt06),'')
      and IFNULL(ia.lotatt07,'') = IFNULL(rtrim(de.lotatt07),'')
      and IFNULL(ia.lotatt08,'') = IFNULL(rtrim(de.lotatt08),'')
      and IFNULL(ia.lotatt09,'') = IFNULL(rtrim(de.lotatt09),'')
      and IFNULL(ia.lotatt10,'') = IFNULL(rtrim(de.lotatt10),'')
      and IFNULL(ia.lotatt11,'') = IFNULL(rtrim(de.lotatt11),'')
      and IFNULL(ia.lotatt12,'') = IFNULL(rtrim(de.lotatt12),'')
      and IFNULL(ia.lotatt13,'') = IFNULL(rtrim(de.lotatt13),'')
      and IFNULL(ia.lotatt14,'') = IFNULL(rtrim(de.lotatt14),'')
      and IFNULL(ia.lotatt15,'') = IFNULL(rtrim(de.lotatt15),'')
      and IFNULL(ia.lotatt16,'') = IFNULL(rtrim(de.lotatt16),'')
      and IFNULL(ia.lotatt17,'') = IFNULL(rtrim(de.lotatt17),'')
      and IFNULL(ia.lotatt18,'') = IFNULL(rtrim(de.lotatt18),'')
      and ia.customerid = de.customerid and ia.sku = de.sku
	where h.asnno in
	<foreach collection="array" item="id" index="index" open="(" close=")" separator=",">
		#{id}
	</foreach>
	and asn_print_flag &lt;&gt; 'Y'
</select>

    <select id="queryForScan" parameterType="java.util.Map" resultMap="ExtendDetailMap">
        select
        <include refid="Base_Column_List"/>
        from doc_asn_details detail
        where detail.asnno = #{asnno, jdbcType=VARCHAR}
        and detail.customerid = #{customerid, jdbcType=VARCHAR}
        and detail.sku = #{sku, jdbcType=VARCHAR}
        and IFNULL(detail.lotatt04,'') = IFNULL(rtrim(#{lotatt04, jdbcType=VARCHAR}),'')
        and IFNULL(detail.lotatt05,'') = IFNULL(rtrim(#{lotatt05, jdbcType=VARCHAR}),'')
    </select>
	<select id="queryByList"  resultMap="DocAsnDetailMap" parameterType="Object">
		SELECT
		<include refid="Base_Column_List"/>
		FROM doc_asn_details
		<include refid="Example_Where_Clause"/>
	</select>

    <!--获取预入库单中哪几条是部分收货的-->
    <select id="queryPartReceivedAsn" parameterType="Object" resultMap="DocAsnDetailMap">
        SELECT b.* FROM (
            SELECT asnno, asnlineno, IFNULL(SUM(putwayqty_completed),0) as completedQty FROM doc_pa_details
            WHERE asnno = #{asnno} GROUP BY asnno, asnlineno
        ) AS a
        LEFT JOIN  doc_asn_details b on a.asnno = b.asnno AND a.asnlineno = b.asnlineno AND IFNULL(b.expectedqty, 0) > IFNULL(a.completedQty, 0)
        WHERE b.asnno = #{asnno} ;
    </select>

    <!-- 联合头档删除记录 -->
    <delete id="deleteByHead" parameterType="Object">
	delete from doc_asn_details where asnno = #{asnno, jdbcType=VARCHAR}
    </delete>

	<select id="queryLeakLotatt4YYAsn" parameterType="java.util.Map" resultType="int">
		select count(*) from doc_asn_details
		where asnno	= #{asnno}
		and (ifnull(lotatt01, '') = '' or
			ifnull(lotatt02, '') = '')
	</select>
</mapper>
